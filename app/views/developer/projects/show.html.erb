<%= render 'layouts/project', type: current_user.type%>

<h1>Your Assigned Change Requests</h1>
<table>
  <thead>
    <th>Title</th>
    <th>Type</th>
    <th>Deadline</th>
    <th>Status</th>
    <th>Posted by</th>
    <th colspan=3>Links</th>
  </thead>
  <tbody>
    <% @assigned_requests.each do |change| %>
    <tr>
      <td><%= change.title%></td>
      <td><%= change.type%></td>
      <td><%= change.deadline%></td>
      <td><%= change.status%></td>
      <td><%= QualityAssurance.find(change.user_id).email%></td>
      <% if change.status == 'resolved' || change.status == 'completed'%>
        <td>Resolved</td>
      <% else %>
        <td>Mark as resolved</td>
      <% end %>
    </tr>
    <% end %>
  </tbody>
</table>

<h1>Change Requests</h1>

<table>
  <thead>
    <th>Title</th>
    <th>Type</th>
    <th>Deadline</th>
    <th>Status</th>
    <th>Posted by</th>
    <th colspan=3>Links</th>
  </thead>
  <tbody>
    <% @change_requests.each do |change| %>
    <tr>
      <td><%= change.title%></td>
      <td><%= change.type%></td>
      <td><%= change.deadline%></td>
      <td><%= change.status%></td>
      <td><%= QualityAssurance.find(change.user_id).email%></td>
      <td><%= link_to 'Assign', assign_developer_change_request_path(change), method: :post, data: {confirm: 'Are you sure?'}%></td>
    </tr>
    <% end %>
  </tbody>
</table>
